# Портфолио и личный сайт

## Запуск приложения локально

Для того, чтобы развернуть приложение локально, после его копирования из репозитория нужно в корне проекта ввести команду npm install/yarn init, а затем npm run dev/yarn dev

### Переменные окружения для сервера

- NODE_ENV = development/production
- PORT = 7001

#### БД

- DATABASE_URL = postgresql://[user]:[password]@[address]:[port]/[database]?schema = [public]

#### JWT токены доступа

- JWT_ACCESS_SECRET = some secret text
- JWT_REFRESH_SECRET = some secret text

#### Почтовый клиент

- SMTP_HOST = smtp.mail.ru
- SMTP_PORT = 587
- SMTP_USER = [email@mail.ru]
- SMTP_PASSWORD = [password]
- API_URL = http://[address]:[PORT]
- CLIENT_URL = http://[address]:[CLIENT_PORT]

### Переменные окружения для клиента

- VITE_API_URL = http://[address]:[PORT]/api
- VITE_API_STATIC_URL = http://[address]:[PORT]/

## Описание структуры проекта

Проект является монорепозиторием и состоит из двух частей - клиента и сервера.

### Основные библиотеки и технологии на сервере

Сервер написан на express, для работы с БД (**PostgreSQL**) используется ORM **Prisma**. Для валидации данных - **yup**.

- все статические файлы хранятся в папке static
- в папке prisma представлена схема БД (после ее изменения нужно ввести две команды _prisma migrate dev --name migrate_name_ и _prisma migrate deploy_)
- основная конфигурация сервера представлена в файле server.js
- папка app содержит в себе следующие сущности:
  - controllers - здесь представлены контроллеры
  - routes - маршруты или конечные точки api
  - services - сервисы взаимодействия с данными
  - dto - содержит в себе все data transfer objects
  - middlewares - миддлвары защиты маршрутов и обработки ошибок

routes вызывают контроллеры, а те в свою очередь вызывают сервисы.

### Основные библиотеки и технологии на клиенте

- Сборщик - vite, в файле vite.config.ts настроен alias импортов
- Клиент написан на **react**,
- В качестве state-менеджера используется **mobx**,
- Для запросов - **axios**,
- Работа с формами - **react-hook-form**,
- Стилизация компонентов - **tailwind**

Все состояние приложения хранится в стейте mobx и через него же делаются все запросы. Каждое действие на главной странице, странице профиля и пользователей, а также странице проектов сразу сохраняется на сервере. Страница редактирования проекта отличается. При редактировании проекта в стейте хранится json, который представляет собой весь проект. Все действия по изменению проекта редактируют этот json, а при нажатии кнопки **Сохранить** обновляют проект на сервере. То есть настройка и редактирование проекта - полностью клиентские, это сделано для того, чтобы в случае ошибки, можно было просто перезагрузить страницу и отменить все действия.

Каждый проект состоит из секций, которые представлены блоками. Проект - это страница, которая представляет собой статью, описывающую определенное приложение. Секции - это разделы страницы, а блоки - элементы секций (заголовки, текст, изображения, списки и т.д.)
